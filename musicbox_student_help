Summary:
Install Docker https://www.docker.com
Follow the  instructions to install and run (interactive version) of Music Box https://github.com/NCAR/music-box
Detailed instructions, exceptional cases, and extended usage follow.


This is a writeup of all of the issues students could have and solutions that should help them.

How to Install Docker
To start your Docker installation, go to the following website:
https://www.docker.com/get-started
Select your correct download from the “Docker Desktop” column.  The default one is probably the correct one for your machine. . When selecting ‘Docker Desktop’ you are prompted with your machine type. Select the proper one and the download will appear in the bottom left of your screen labeled ‘Docker.dmg.’

For Apple Machines
Click on the downloaded ‘Docker.dmg’. The installation will start.  Follow the standard instructions for installation.  The last step is to drag the docker desktop icon into the Applications folder.  
If the icon is not in the upper right hand side of your screen near the clock, you will need to click on the Docker application to start it.  During initialization, you will see the container loading onto the whale.  Some users may need to reboot their machines to get docker to work.

For Windows Machines
Once the download for Docker pops up, the next step is to download WSL version 2 onto your PC. A series of instructions will appear on your screen with a link saying ‘Complete these instructions before restarting your device.’ Select the link and you will be brought to a github link telling you specific instructions on the download process. This includes downloading Debian, entering in the command line prompts, and resetting WSL version 2 to the default version. Once this step is complete, the download for Docker is conducted. Your computer should restart and the Docker symbol will appear on your desktop.

How to Install the Terminal
For Apple Machines
The Terminal window is installed as a standard part of MacOSX.



For Windows Machines
In a new browser, look up ‘Windows Terminal’ and select the Microsoft Store. The download is free, so select the install button and download the application onto your device. The terminal window will be used to run the MusicBox interactive interface.

How to Install MusicBox
Directions for installing MusicBox are listed here:
https://github.com/NCAR/music-box
The interactive version is suggested for students. First, open up Docker and have it open in the background. Then, open up your Terminal window and enter the github commands into the command line. Once the image pull and local host 8000 have finished downloading, you can open up a browser window and enter ‘localhost:8000’ into the search bar. MusicBox should appear on your screen.

Using MusicBox
Once MusicBox starts to run, you will be prompted with an introduction to ‘Get Started’. There are three options to start from, including ‘Select Example’, ‘Start From Scratch’ and ‘Load Configuration file.’ Each is explained when scrolling down the page to ‘How to use MusicBox’. Once you make the selection you would like to begin with, you can create your mechanism. 

Mechanism
Adding New Species
There are three tabs along the left side of the browser. After clicking ‘Mechanism’ the ‘Chemical Species’ tab will be displayed. Select ‘Add Species’ and type in the name of the species you would like to add. The properties that are most often listed for common species is ‘absolute convergence tolerance’ which should be set to ‘9.999999999999999e-19’ and ‘molecular weight [kg/mol]’. Make sure to click ‘Save’ to complete the addition. Once the species has been added, an image will appear beneath it including a blue circle. Once reactions have been added to the mechanism, the blue circle will include arrows to the sources and sinks generated by specific reactions including that species.

Adding New Reactions
Under the ‘Mechanism’ tab, there is a second page labeled ‘Reactions’. To add a reaction select ‘Add Reaction’. First, the reaction type must be selected. The options for reaction types include ‘Arrhenius,’ ‘Emission,’ ‘First-order loss,’ ‘Photolysis,’ ‘Ternary chemical activation’ and ‘Troe.’ Each has specialized specifications for reaction rates based on the equation(s) displayed beneath products and reactants. Each has products and reactants in common. These products and reactants can be added by selecting the ‘+’. You can then select the species in that reaction, along with the number of moles of that species. Once all of the specifications for the reaction have been added, select ‘Save’ to add it to the mechanism.

Photolysis Reactions
When a photolysis reaction is desired, you are prompted to give the reaction a ‘MUSICA name’ which gives the reaction a reference. Common names that are used include the species being photolyzed followed by an underscore and a number (eg. O2_1 for the reaction O2 → 2O). This is what will be referenced in the ‘Evolving’ conditions. 

Conditions
Under the ‘Conditions’ tab, there are three selections that include ‘General,’ ‘Initial,’ and ‘Evolving.’

General
Under ‘General’, the ‘Chemistry time step,’ ‘Output Time Step’ and ‘Simulation time’ can be altered. The default setting is a Chemistry time step of 1.0 minute, an output time step of 200.0 seconds, and a simulation time of 5 days. The units of the simulation can be changed upon selecting the unit and choosing between the units available.

Initial
Initial conditions can be specified through a text file. The text file should be in the format ‘.csv’ to be uploaded correctly. You can choose the file directly from your computer. For further instructions on the format of the file, select ‘Show input file instructions.’ This will allow you to see the formatting needed for proper transfer of conditions. If you do not have an input file, the conditions can be input by hand. For the simulation to run, initial concentrations, a temperature and pressure, and if applicable any reaction rates or rate constants for all species in the test must be set. Select ‘Add’ and choose the species you want to set the initial conditions for. The units of the initial conditions can be changed by hovering your cursor over the units and then selecting your preferred units. 

When setting Temperature and Pressure
Either set a constant Temperature and Pressure for the simulation under ‘Environmental Conditions’ or set their time-evolving conditions in the ‘.csv’ file.  If values are set in the file, they will overwrite the constant values set in the GUI for the ‘Environmental Conditions’

Evolving
Under evolving conditions, you are prompted to upload a file in the format ‘.csv’. The values that should be included in the ‘.csv’ file include the time at every time step until the end of the simulation, pressure, temperature, and photolysis rates for each of the photolysis reactions present in the mechanism. The formatting of temperature and pressure is ‘ENV.’ (eg. ENV.pressure). The format of each of the photolysis rates is ‘PHOT.’ (eg. PHOT.O2_1). Make sure that there is a value for every time step of the simulation for each of these variables or the simulation will not run correctly.

Run the Simulation
Once you have finished designing your mechanism, you can then run it for the results. Select the ‘Run Model’ button on the left side of the screen. Once the model has finished running, two new tabs will appear: ‘Plot Results’ and ‘Download’.

Plot Results
When selecting ‘Plot Results’ there are three pages to choose from including ‘Chemical Species,’ ‘Reaction Rates,’ and ‘Environmental Conditions.’ Under ‘Chemical Species’ any species in the mechanism can be selected. On the screen, a graph will be generated to show you the concentration of the species in the specified units of your choice over time. The units can be changed under ‘Select plot units.’ Under ‘Reaction rates’, the rates of all of the reactions will be present. You can choose from the list to view one species at a time or several simultaneously. Under ‘Environmental Conditions’ the density, temperature and pressure can all be viewed graphically over time.

Download
Under the download tab, the configuration file and the results of the simulation can be downloaded to your computer. Upon selecting ‘Download Configuration File,’ a ‘.zip’ file will be added to your downloads. Rename the file to a name of your choice. Upon selecting ‘Download Results,’ a ‘.csv’ file will be added to your downloads. The time, pressure, temperature, density and concentration of each species will be displayed.

Containers vs. Images
An image is a file that holds the source code and any files necessary for your running terminal program - in this case, MusicBox. Images cannot be run, but they can be used to generate a container. 
A container is a running version of an image. Once a container is generated from an image, it can be edited and started. Any number of containers can be created from one image. This means that if you would like to run multiple MusicBox mechanisms at the same time, it is possible to create a second, or even a third container.
More information on the difference between an image and a container:
https://phoenixnap.com/kb/docker-image-vs-container

Running Multiple Containers
Once MusicBox has been run in your terminal window with Docker running in the background, an Image will be created, along with a container running in PORT: 8000. A random name will be assigned to each of the containers. To start another container in an alternate port, go to the tab on the left hand side of the Docker window and select ‘Images’. In here, you will find an image named ‘ncar/music-box’ that is in use. Move your cursor over the image and select the blue ‘RUN’ button. The ‘New Container’ window will then appear. Once it does, select the gray arrow to allow for more options, then type in a new port under ‘Local Host’ (eg. 8001) and select ‘RUN’. A new container will be generated with a new name. Now, you should be able to open up a second MusicBox window at localhost:8001. 

Updating the MusicBox version to the latest version
MusicBox is a new program and is constantly being updated. To make sure your version is up to date, open up Docker and head over to the ‘Images’ tab. Once your cursor is over the Image you wish to update, three vertical dots will appear beside the button ‘RUN’. Select these three dots. You will see a drop down menu with the options ‘Inspect’, ‘Pull’, ‘Push to Hub’ and ‘Remove’. Select the ‘Pull’ option and allow for the update to be conducted. Once the update is complete, a green notice will appear saying ‘Status: Image is up to date for ncar/music-box:latest’. You can now refresh your container page and you should see the new version.

Issues with Updating MusicBox
In some cases, simply refreshing the page does not allow for the newest version of MusicBox to be seen. If this is the case, try deleting the container under ‘Containers / Apps’ by moving your cursor over your container and selecting the trash to delete it. You can then head over to the ‘Images’ tab and run a new container under the port you just deleted.
If the MusicBox container still does not seem to be updated, the best thing to do is delete the Image completely. First, head over to the ‘Images’ tab. Hover your cursor over the Image and select the three vertical dots. Select the option ‘Remove’ to delete the image entirely. You will then have to open your Terminal window up and redownload MusicBox from scratch. Once your new Image has been created, the MusicBox container should be up to date and functioning.

